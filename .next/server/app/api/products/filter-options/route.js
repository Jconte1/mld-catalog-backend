"use strict";(()=>{var e={};e.id=220,e.ids=[220],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3125:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>A,patchFetch:()=>h,requestAsyncStorage:()=>f,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>y});var o={};t.r(o),t.d(o,{GET:()=>c,OPTIONS:()=>d});var s=t(9303),a=t(8716),n=t(670),i=t(6318),u=t(3717);function p(){return{"Access-Control-Allow-Origin":"https://www.mld.com","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,PUT,PATCH,DELETE,OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization",Vary:"Origin"}}function d(){return new Response(null,{status:204,headers:p()})}async function c(e){let r=new URL(e.url),t=(0,u.Z)(r.searchParams.get("type")||"");if(!t)return Response.json({error:"Missing type"},{status:400,headers:p()});try{let e=await i.Z.products.findMany({where:{type:{equals:t,mode:"insensitive"}},select:{brand:!0,productType:!0,configuration:!0,features:!0,width:!0,fuelType:!0}}),r=new Set,o=new Set,s=new Set,a=new Set,n=new Set,u=new Set;return e.forEach(e=>{e.brand&&r.add(e.brand),Array.isArray(e.productType)&&e.productType.forEach(e=>{"string"==typeof e&&""!==e.trim()&&o.add(e.trim())}),Array.isArray(e.configuration)&&e.configuration.forEach(e=>{"string"==typeof e&&""!==e.trim()&&s.add(e.trim())}),Array.isArray(e.features)&&e.features.forEach(e=>{e&&a.add(e)}),e.width&&n.add(e.width),Array.isArray(e.fuelType)&&e.fuelType.forEach(e=>{"string"==typeof e&&""!==e.trim()&&u.add(e.trim())})}),Response.json({Brand:Array.from(r).sort(),...o.size>0&&{productType:Array.from(o).sort()},...s.size>0&&{Configuration:Array.from(s).sort()},Width:Array.from(n).sort(),...u.size>0&&{FuelType:Array.from(u).sort()},Features:Array.from(a).sort()},{headers:p()})}catch(e){return console.error("âŒ Failed to get filter options:",e),Response.json({error:"Failed to load filter options"},{status:500,headers:p()})}}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/products/filter-options/route",pathname:"/api/products/filter-options",filename:"route",bundlePath:"app/api/products/filter-options/route"},resolvedPagePath:"C:\\Users\\james\\Documents\\MLDwebsite\\catalogue-backend\\app\\api\\products\\filter-options\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:f,staticGenerationAsyncStorage:y,serverHooks:m}=l,A="/api/products/filter-options/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:y})}},6318:(e,r,t)=>{t.d(r,{Z:()=>o});let o=new(require("@prisma/client")).PrismaClient},3717:(e,r,t)=>{t.d(r,{Z:()=>o});function o(e){return e?.toLowerCase().replace(/-/g," ").trim()}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[176],()=>t(3125));module.exports=o})();